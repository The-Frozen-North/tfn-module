//::///////////////////////////////////////////////
//:: TEMPLATES: Fetch and Retrieve Plot Header
//:: Copyright (c) 2001 Bioware Corp.
//:://////////////////////////////////////////////
/*

*/
//:://////////////////////////////////////////////
//:: Created By:  Brent
//:: Created On:  December
//:://////////////////////////////////////////////


//::///////////////////////////////////////////////
//:: Global
//:: Copyright (c) 2001 Bioware Corp.
//:://////////////////////////////////////////////
/*
 this returns the object where
 plot globals for this plot are suppose
 to be stored

*/
//:://////////////////////////////////////////////
//:: Created By:   Brent
//:: Created On:   December
//:://////////////////////////////////////////////

object Global()
{
    return GetLocalObject(OBJECT_SELF,"NW_J_FETCH_MYGLOBALS");
}

//::///////////////////////////////////////////////
//:: SetGlobal
//:: Copyright (c) 2001 Bioware Corp.
//:://////////////////////////////////////////////
/*
   Sets where all the globals for this plot
   are going to be stored.
*/
//:://////////////////////////////////////////////
//:: Created By:  Brent
//:: Created On:  December
//:://////////////////////////////////////////////

void SetGlobal(object oTarget, object oGlobal)
{
    SetLocalObject(oTarget,"NW_J_FETCH_MYGLOBALS", oGlobal);
}
//::///////////////////////////////////////////////
//:: SetPlotToken
//:: Copyright (c) 2001 Bioware Corp.
//:://////////////////////////////////////////////
/*
    Sets the plot token to a value the user wants.
*/
//:://////////////////////////////////////////////
//:: Created By:
//:: Created On:
//:://////////////////////////////////////////////
void SetPlotToken(int nID)
{
    SetLocalInt(Global(), "NW_J_FETCH_PLOTTOKEN_1", nID);
}

//::///////////////////////////////////////////////
//:: GetPlotToken
//:: Copyright (c) 2001 Bioware Corp.
//:://////////////////////////////////////////////
/*
    Returns the ID of the plot token.
    Remember, if this gets changed, then the
    dialog use of this token has to change as well.
*/
//:://////////////////////////////////////////////
//:: Created By:
//:: Created On:
//:://////////////////////////////////////////////
int GetPlotToken()
{
    return GetLocalInt(Global(), "NW_J_FETCH_PLOTTOKEN_1");
}

//::///////////////////////////////////////////////
//:: SetPlotTag
//:: Copyright (c) 2001 Bioware Corp.
//:://////////////////////////////////////////////
/*

*/
//:://////////////////////////////////////////////
//:: Created By:
//:: Created On:
//:://////////////////////////////////////////////

void SetPlotTag(string sTag)
{
    SetLocalString(Global(), "NW_J_FETCH_PLOT_TAG", sTag);
}
//::///////////////////////////////////////////////
//:: GetPlotTag
//:: Copyright (c) 2001 Bioware Corp.
//:://////////////////////////////////////////////
/*

*/
//:://////////////////////////////////////////////
//:: Created By:
//:: Created On:
//:://////////////////////////////////////////////

string GetPlotTag()
{
    return GetLocalString(Global(), "NW_J_FETCH_PLOT_TAG");
}

//::///////////////////////////////////////////////
//:: SetFetchItem
//:: Copyright (c) 2001 Bioware Corp.
//:://////////////////////////////////////////////
/*

*/
//:://////////////////////////////////////////////
//:: Created By:
//:: Created On:
//:://////////////////////////////////////////////
void SetFetchItem(string sTag)
{
   SetLocalString(Global(), "NW_J_FETCH_ITEM", sTag);
}

//::///////////////////////////////////////////////
//:: GetFetchItem
//:: Copyright (c) 2001 Bioware Corp.
//:://////////////////////////////////////////////
/*

*/
//:://////////////////////////////////////////////
//:: Created By:
//:: Created On:
//:://////////////////////////////////////////////

string GetFetchItem()
{
    return GetLocalString(Global(), "NW_J_FETCH_ITEM");
}

//::///////////////////////////////////////////////
//:: PlayerHasFetchItem
//:: Copyright (c) 2001 Bioware Corp.
//:://////////////////////////////////////////////
/*
    Checks if player has fetch item.
*/
//:://////////////////////////////////////////////
//:: Created By:
//:: Created On:
//:://////////////////////////////////////////////
int PlayerHasFetchItem(object oPC)
{
    return GetIsObjectValid(GetItemPossessedBy(oPC,GetFetchItem()));
}
//::///////////////////////////////////////////////
//:: TakeFetchItem
//:: Copyright (c) 2001 Bioware Corp.
//:://////////////////////////////////////////////
/*
     Removes the fetch item from player inventory.
*/
//:://////////////////////////////////////////////
//:: Created By:
//:: Created On:
//:://////////////////////////////////////////////

void TakeFetchItem(object oPC)
{
    object oItem =  GetItemPossessedBy(oPC,GetFetchItem());
    if (GetIsObjectValid(oItem) == TRUE)
    {
        DestroyObject(oItem);
    }
}

//::///////////////////////////////////////////////
//:: CreateFetchItemOn
//:: Copyright (c) 2001 Bioware Corp.
//:://////////////////////////////////////////////
/*
     Creates the item to be fetched on the object.
*/
//:://////////////////////////////////////////////
//:: Created By:
//:: Created On:
//:://////////////////////////////////////////////

void CreateFetchItemOn(object oPC)
{
     // CreateItemOnObject(GetFetchItem(),oPC);
     // * December 13 2001
     // * This function no longer does anything
     // * we changed this so the NPC starts with the
     // * item on him
}

//::///////////////////////////////////////////////
//:: GiveFetchItemToPC
//:: Copyright (c) 2001 Bioware Corp.
//:://////////////////////////////////////////////
/*
   Gives the fetch item to the PC
*/
//:://////////////////////////////////////////////
//:: Created By:     Brent
//:: Created On:     December
//:://////////////////////////////////////////////

void GiveFetchItemToPC(object oPC)
{
    object oItem = GetItemPossessedBy(OBJECT_SELF, GetFetchItem());
    if (GetIsObjectValid(oItem) == TRUE)
    {
        ActionGiveItem(oItem ,oPC);
    }
}


//::///////////////////////////////////////////////
//:: SetFetchee
//:: Copyright (c) 2001 Bioware Corp.
//:://////////////////////////////////////////////
/*

*/
//:://////////////////////////////////////////////
//:: Created By:
//:: Created On:
//:://////////////////////////////////////////////

void SetFetchee(object oFetchee)
{
    SetLocalObject(Global(),"NW_J_FETCH_OWNER", oFetchee);
}
//::///////////////////////////////////////////////
//:: GetFetchee
//:: Copyright (c) 2001 Bioware Corp.
//:://////////////////////////////////////////////
/*

*/
//:://////////////////////////////////////////////
//:: Created By:
//:: Created On:
//:://////////////////////////////////////////////

object GetFetchee()
{
    return GetLocalObject(Global(),"NW_J_FETCH_OWNER");
}
